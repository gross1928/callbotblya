# –ì–∞–π–¥ –ø–æ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ "–ü—Ä–æ–¥—É–∫—Ç—ã" üì¶

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ?

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–≤–æ–∏ –ª—é–±–∏–º—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å –ö–ë–ñ–£ –∏ –±—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–ª—è—Ç—å –∏—Ö –≤ —Ç—Ä–µ–∫–∏–Ω–≥ –ø–∏—Ç–∞–Ω–∏—è!

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–æ–¥—É–∫—Ç—ã" –≤ –º–µ–Ω—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –µ–¥—ã
- –ù–∞–∂–∏–º–∞–µ—Ç "‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç"
- –í–≤–æ–¥–∏—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–°—ã—Ä –ì–æ–ª–ª–∞–Ω–¥—Å–∫–∏–π")
- –í–≤–æ–¥–∏—Ç –ö–ë–ñ–£ –Ω–∞ 100–≥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:
  ```
  220
  13
  5
  21
  ```

### 2. **–°–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è: –ø–æ 8 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ù–∞–≤–∏–≥–∞—Ü–∏—è: –∫–Ω–æ–ø–∫–∏ ‚¨ÖÔ∏è –∏ ‚û°Ô∏è

### 3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞**
- –ù–∞–∂–∞—Ç—å –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
- –í–≤–µ—Å—Ç–∏ –≤–µ—Å –≤ –≥—Ä–∞–º–º–∞—Ö (–∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏: 50–≥, 100–≥, 150–≥, 200–≥, 250–≥, 300–≥)
- –í—ã–±—Ä–∞—Ç—å —Ç–∏–ø –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏ (–∑–∞–≤—Ç—Ä–∞–∫/–æ–±–µ–¥/—É–∂–∏–Ω/–ø–µ—Ä–µ–∫—É—Å)
- –ü—Ä–æ–¥—É–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è —Å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–Ω—ã–º –ö–ë–ñ–£

### 4. **–£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞**
- –í –∫–∞—Ä—Ç–æ—á–∫–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "‚ùå –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç"

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö!

–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase:

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:
1. –ó–∞–π–¥–∏ –≤ Supabase Dashboard: https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏ –≤ **SQL Editor**
4. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `database/migrations/003_add_user_products_table.sql`
5. –°–∫–æ–ø–∏—Ä—É–π —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏ –≤—ã–ø–æ–ª–Ω–∏ –≤ SQL Editor

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏ —ç—Ç–æ—Ç SQL:

```sql
-- –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
CREATE TABLE IF NOT EXISTS user_products (
  id SERIAL PRIMARY KEY,
  user_id BIGINT NOT NULL,
  name VARCHAR(255) NOT NULL,
  calories INTEGER NOT NULL,
  protein DECIMAL(10, 1) NOT NULL,
  fat DECIMAL(10, 1) NOT NULL,
  carbs DECIMAL(10, 1) NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  
  -- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  CONSTRAINT fk_user_products_user_id 
    FOREIGN KEY (user_id) 
    REFERENCES users(telegram_id) 
    ON DELETE CASCADE
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_user_products_user_id ON user_products(user_id);
CREATE INDEX idx_user_products_created_at ON user_products(created_at DESC);

-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
COMMENT ON TABLE user_products IS '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è';
COMMENT ON COLUMN user_products.user_id IS 'ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram';
COMMENT ON COLUMN user_products.name IS '–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞';
COMMENT ON COLUMN user_products.calories IS '–ö–∞–ª–æ—Ä–∏–∏ –Ω–∞ 100–≥';
COMMENT ON COLUMN user_products.protein IS '–ë–µ–ª–∫–∏ –Ω–∞ 100–≥';
COMMENT ON COLUMN user_products.fat IS '–ñ–∏—Ä—ã –Ω–∞ 100–≥';
COMMENT ON COLUMN user_products.carbs IS '–£–≥–ª–µ–≤–æ–¥—ã –Ω–∞ 100–≥';
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `database/migrations/003_add_user_products_table.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- ‚úÖ `src/database/products-queries.ts` - —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ `src/handlers/products.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ `src/types/index.ts` - –¥–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `UserProduct`

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/bot/index.ts` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ –∫–Ω–æ–ø–∫–∏
- ‚úÖ `dist/*` - —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
–¢–∞–±–ª–∏—Ü–∞ `user_products`:
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø—Ä–æ–¥—É–∫—Ç–∞
- `user_id` - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
- `calories`, `protein`, `fat`, `carbs` - –ö–ë–ñ–£ –Ω–∞ 100–≥
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

### 2. –õ–æ–≥–∏–∫–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–¥—É–∫—Ç —Å –ö–ë–ñ–£ –Ω–∞ 100–≥
2. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –≤–≤–æ–¥–∏—Ç –≤–µ—Å –≤ –≥—Ä–∞–º–º–∞—Ö
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –ö–ë–ñ–£: `(–∑–Ω–∞—á–µ–Ω–∏–µ / 100) * –≤–µ—Å`
4. –°–æ–∑–¥–∞–µ—Ç—Å—è `FoodAnalysis` –æ–±—ä–µ–∫—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω–∞—è –µ–¥–∞

### 3. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚ö° –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- üìä –¢–æ—á–Ω–æ–µ –ö–ë–ñ–£ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ —Å —É–ø–∞–∫–æ–≤–∫–∏)
- üíæ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- üîÑ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

### –ü—Ä–∏–º–µ—Ä 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—ã—Ä–∞
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
1. "–ü—Ä–æ–¥—É–∫—Ç—ã" ‚Üí "‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç"
2. –ù–∞–∑–≤–∞–Ω–∏–µ: "–°—ã—Ä –†–æ—Å—Å–∏–π—Å–∫–∏–π"
3. –ö–ë–ñ–£ –Ω–∞ 100–≥:
   360
   23
   29
   0.3
4. ‚úÖ –ü—Ä–æ–¥—É–∫—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω!

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
1. "–ü—Ä–æ–¥—É–∫—Ç—ã" ‚Üí "üçΩ –°—ã—Ä –†–æ—Å—Å–∏–π—Å–∫–∏–π"
2. –í–µ—Å: 50–≥
3. –¢–∏–ø: –ó–∞–≤—Ç—Ä–∞–∫
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: 180 –∫–∫–∞–ª, –ë11.5–≥ –ñ14.5–≥ –£0.15–≥
```

### –ü—Ä–∏–º–µ—Ä 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–µ—á–∫–∏
```
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ:
1. –ù–∞–∑–≤–∞–Ω–∏–µ: "–ì—Ä–µ—á–∞ –≤–∞—Ä–µ–Ω–∞—è"
2. –ö–ë–ñ–£ –Ω–∞ 100–≥:
   110
   4.5
   1.2
   21.3
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
1. –í—ã–±—Ä–∞—Ç—å "üçΩ –ì—Ä–µ—á–∞ –≤–∞—Ä–µ–Ω–∞—è"
2. –í–µ—Å: 200–≥
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: 220 –∫–∫–∞–ª, –ë9–≥ –ñ2.4–≥ –£42.6–≥
```

---

## –î–µ–ø–ª–æ–π:

‚úÖ **–ö–æ–¥ –∑–∞–ø—É—à–µ–Ω –Ω–∞ GitHub** ‚Üí Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

‚ö†Ô∏è **–ù–µ –∑–∞–±—É–¥—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase!**

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º.

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞
2. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
3. ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–µ—Å–ª–∏ –±–æ–ª—å—à–µ 8 –ø—Ä–æ–¥—É–∫—Ç–æ–≤)
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤–µ—Å–∞
5. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –¥–Ω–µ–≤–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è
6. ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ö–ë–ñ–£ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Å—á—ë—Ç–∞

---

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- üì∏ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ç—Ä–∏—Ö-–∫–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ö–ë–ñ–£
- üîç –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º –ø—Ä–æ–¥—É–∫—Ç–∞–º
- üçΩÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- üì§ –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –±–∞–∑—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤

---

**–§—É–Ω–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

